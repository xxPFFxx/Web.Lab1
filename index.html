<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Лабораторная работа по Web-программированию №1</title>
    <link rel="stylesheet" type="text/css" href="css/styles.css">
    <script type="text/javascript">
        function validate(form) {

            var y = form.y.value;
            y = y.replace(/,/, ".");
            if (y =="" || isNaN(y)) {document.getElementById("error").innerHTML = "Y должен быть числом"; return false}
            else if (y<-3 || y>5){
                document.getElementById("error").innerHTML = "Y должен находиться от -3 до 5"; return false
            }
            else {
                document.getElementById("div-result").style.display = "block";
                document.getElementById("error").innerHTML = "";
                return true;}
        }
        function check(input) {
            input.value = input.value.replace(/[^\d-,.]/, '');
        }
    </script>
</head>
<body>

<div class="header block">
    <span class="header"> Демичев Даниил Дмитриевич<br> Группа P3213 <br> Вариант: 213003</span>
</div>
<div class="block info"> 
    <img src="img/text.PNG" id="info-text">
    <img src="img/pic.PNG" id="info-pic">
</div>
<div class="block input">
    <form action="work.php" method="get" target="result"  onsubmit="return validate(this)">
    Выберите X:
        <input type="radio" checked="checked" name="x" value="-5">-5
    <input type="radio" name="x" value="-4">-4
    <input type="radio" name="x" value="-3">-3
    <input type="radio" name="x" value="-2">-2
    <input type="radio" name="x" value="-1">-1
    <input type="radio" name="x" value="0">0
    <input type="radio" name="x" value="1">1
    <input type="radio" name="x" value="2">2
    <input type="radio" name="x" value="3">3
    <br>
    Введите Y:
    <input type="text"  placeholder="-3..5" name="y" onkeyup="check(this)" onchange="check(this)"> <span id="ajax"></span>
    <br>
    Выберите R:
    <select name="r">
        <option value="1">1</option>
        <option value="1.5">1.5</option>
        <option value="2">2</option>
        <option value="2.5">2.5</option>
        <option value="3">3</option>

    </select>
        <br>
        <input type="submit" id="submit">
    </form>
    <br>
    <span id="error"></span>
</div>
<div align="center" class="block" id="div-result" style="display: none">
    <iframe id="result" name="result" scrolling="no" frameborder="no" ></iframe>
</div>
<div class="footer block">
    2019 г.
</div>
<script>
    request = new ajaxRequest();
    request.open("GET", "ajax.php", true);
    request.onreadystatechange = function()
    {
        if (this.readyState == 4)
        {
            if (this.status == 200)
            {
                if (this.responseText != null)
                {
                    document.getElementById('ajax').innerHTML =
                        this.responseText
                }
                else alert("Ошибка AJAX: Данные не получены")
            }
            else alert( "Ошибка AJAX: " + this.statusText)
        }
    }
    request.send()
    function ajaxRequest()
    {
        try
        {
            var request = new XMLHttpRequest()
        }
        catch(e1)
        {
            try
            {
                request = new ActiveXObject("Msxml2.XMLHTTP")
            }
            catch(e2)
            {
                try
                {
                    request = new ActiveXObject("Microsoft.XMLHTTP")
                }
                catch(e3)
                {
                    request = false
                }
            }
        }
        return request
    }
</script>
</body>
</html>
